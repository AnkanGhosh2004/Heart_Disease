<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardioSense - Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <img src="{{ url_for('static', filename='logo.jpg') }}" alt="CardioSense Logo" class="logo">
            <span class="brand">CardioSense</span>
        </div>
        <button class="navbar-toggle" id="navbar-toggle" aria-label="Toggle navigation">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <div class="navbar-right" id="navbar-menu">
            <nav style="text-align:center; margin-bottom:20px;">
                <a href="/" style="margin:0 10px;" class="active"><i class="fa-solid fa-house-medical nav-link-icon"></i> Home</a>
                <a href="/about" style="margin:0 10px;"><i class="fa-solid fa-user-doctor nav-link-icon"></i> About</a>
                <a href="/contact" style="margin:0 10px;"><i class="fa-solid fa-message nav-link-icon"></i> Contact</a>
            </nav>
        </div>
    </nav>
    <script>
    // Hamburger menu toggle
    const toggle = document.getElementById('navbar-toggle');
    const menu = document.getElementById('navbar-menu');
    toggle.addEventListener('click', () => {
        menu.classList.toggle('open');
        toggle.classList.toggle('open');
    });
    </script>
    <main>
        <div class="form-container">
            <form>
                <div class="form-group">
                    <label>Age (years)</label>
                    <input type="number" name="age" placeholder="Enter your age" required>
                </div>
                <div class="form-group">
                    <label>Sex</label>
                    <select name="sex" required>
                        <option value="">Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Chest Pain Type</label>
                    <select name="cp" required>
                        <option value="">Select type</option>
                        <option value="Typical Angina">Typical Angina (Classic heart chest pain)</option>
                        <option value="Atypical Angina">Atypical Angina (Unusual chest discomfort)</option>
                        <option value="Non-anginal Pain">Non-anginal Pain (Not heart-related pain)</option>
                        <option value="Asymptomatic">Asymptomatic (No chest pain)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Resting Blood Pressure (mmHg)</label>
                    <input type="number" name="trestbps" placeholder="e.g., 120 (Normal: 90-120)" required>
                </div>
                <div class="form-group">
                    <label>Cholesterol (mg/dl)</label>
                    <input type="number" name="chol" placeholder="e.g., 200 (Normal: <200)" required>
                </div>
                <div class="form-group">
                    <label>Fasting Blood Sugar &gt; 120 mg/dl</label>
                    <select name="fbs" required>
                        <option value="">Select option</option>
                        <option value="True">Yes (&gt; 120 mg/dl - High)</option>
                        <option value="False">No (â‰¤ 120 mg/dl - Normal)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Resting ECG Results</label>
                    <select name="restecg" required>
                        <option value="">Select result</option>
                        <option value="Normal">Normal (Regular heart rhythm)</option>
                        <option value="ST-T Abnormality">ST-T Wave Abnormality (Minor heart rhythm changes)</option>
                        <option value="Left Ventricular Hypertrophy">Left Ventricular Hypertrophy (Enlarged left heart chamber)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Maximum Heart Rate Achieved</label>
                    <input type="number" name="thalach" placeholder="e.g., 150 (Target: 220-age)" required>
                </div>
                <div class="form-group">
                    <label>Exercise Induced Angina</label>
                    <select name="exang" required>
                        <option value="">Select option</option>
                        <option value="Yes">Yes (Chest pain during exercise)</option>
                        <option value="No">No (No chest pain during exercise)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ST Depression (mm)</label>
                    <input type="number" step="0.1" name="oldpeak" placeholder="e.g., 1.0 (Normal: <1.0)" required>
                </div>
                <div class="form-group">
                    <label>ST Segment Slope</label>
                    <select name="slope" required>
                        <option value="">Select slope</option>
                        <option value="Upsloping">Upsloping</option>
                        <option value="Flat">Flat</option>
                        <option value="Downsloping">Downsloping</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Number of Major Vessels (0-3)</label>
                    <select name="ca" required>
                        <option value="">Select count</option>
                        <option value="0">0 (No major blockages - excellent)</option>
                        <option value="1">1 (One artery blocked)</option>
                        <option value="2">2 (Two arteries blocked)</option>
                        <option value="3">3 (Three arteries blocked - high risk)</option>
                    </select>
                </div>
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>Thalassemia</label>
                    <select name="thal" required>
                        <option value="">Select type</option>
                        <option value="Normal">Normal (Good blood flow to heart)</option>
                        <option value="Fixed Defect">Fixed Defect (Permanent damage/scar)</option>
                        <option value="Reversible Defect">Reversible Defect (Blockage present)</option>
                    </select>
                </div>
                <button type="submit" class="predict-btn">Predict</button>
            </form>
            <div id="result" style="margin-top:20px; font-size:18px; text-align:center;"></div>
        </div>
    </main>
    <script>
    // This script handles the prediction form and displays the result in a styled box
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        if (!form) return;
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            const data = {};
            for (let el of form.elements) {
                if (el.name) data[el.name] = el.value;
            }
            const res = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await res.json();
            let msg = '';
            let color = '';
            if (result.prediction.includes('No Heart Disease')) {
                msg = '<div style="border:2px solid #28a745; background:#e6ffe6; color:#155724; padding:18px; border-radius:10px; font-weight:bold;">You have no heart disease threat.</div>';
            } else {
                msg = '<div style="border:2px solid #dc3545; background:#ffe6e6; color:#721c24; padding:18px; border-radius:10px; font-weight:bold;">You have heart disease and should consult a doctor.</div>';
            }
            document.getElementById('result').innerHTML = msg;
        });
    });
    </script>
    <script>
    document.querySelector('form').onsubmit = async function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {};
        for (let el of form.elements) {
            if (el.name) data[el.name] = el.value;
                <div class="form-group">
                    <label>Sex</label>
                    <select name="sex" required>
                        <option value="">Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Chest Pain Type</label>
                    <select name="cp" required>
                        <option value="">Select type</option>
                        <option value="Typical Angina">Typical Angina</option>
                        <option value="Atypical Angina">Atypical Angina</option>
                        <option value="Non-anginal Pain">Non-anginal Pain</option>
                        <option value="Asymptomatic">Asymptomatic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Fasting Blood Sugar &gt; 120 mg/dl</label>
                    <select name="fbs" required>
                        <option value="">Select option</option>
                        <option value="True">Yes</option>
                        <option value="False">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Resting ECG Results</label>
                    <select name="restecg" required>
                        <option value="">Select result</option>
                        <option value="Normal">Normal</option>
                        <option value="ST-T Abnormality">ST-T Abnormality</option>
                        <option value="Left Ventricular Hypertrophy">Left Ventricular Hypertrophy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Exercise Induced Angina</label>
                    <select name="exang" required>
                        <option value="">Select option</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ST Segment Slope</label>
                    <select name="slope" required>
                        <option value="">Select slope</option>
                        <option value="Upsloping">Upsloping</option>
                        <option value="Flat">Flat</option>
                        <option value="Downsloping">Downsloping</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Number of Major Vessels (0-3)</label>
                    <select name="ca" required>
                        <option value="">Select count</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                </div>
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>Thalassemia</label>
                    <select name="thal" required>
                        <option value="">Select type</option>
                        <option value="Normal">Normal</option>
                        <option value="Fixed Defect">Fixed Defect</option>
                        <option value="Reversible Defect">Reversible Defect</option>
                    </select>
                </div>
